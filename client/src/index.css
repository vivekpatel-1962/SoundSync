@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  /* Brand (classic black theme) */
  --brand: #ffffff;          /* primary accent (white) */
  --brand-2: #d1d5db;        /* subtle secondary */
  --ring: 0 0% 100%;         /* white focus ring */

  /* Surfaces */
  --bg-0: #0a0a0a;           /* page background base (near-black) */
  --bg-1: rgba(18, 18, 18, 0.80);    /* glass */
  --bg-2: rgba(38, 38, 38, 0.55);    /* subtle glass */

  /* Typography */
  --text-0: #f3f4f6;         /* primary text */
  --text-1: #e5e7eb;         /* secondary text */

  /* Borders and misc */
  --border: rgba(255, 255, 255, 0.10);
  --muted: #9ca3af;          /* placeholder and subtle text */

  /* Button tokens */
  --btn-fg: #ffffff;         /* default button foreground */
  --btn-bg: rgba(255, 255, 255, 0.10);
  --btn-bg-hover: rgba(255, 255, 255, 0.14);

  /* Panels and inputs */
  --panel: rgba(255, 255, 255, 0.06);
  --input-bg: rgba(255, 255, 255, 0.06);
  --input-bg-focus: rgba(255, 255, 255, 0.08);

  /* Radius and elevation */
  --radius: 14px;
  --shadow-color: 222 47% 11%;
  --shadow-xl: 0 20px 45px -20px rgba(13, 24, 45, 0.6), 0 10px 22px -12px rgba(13, 24, 45, 0.35);
}

body {
  color: var(--text-0);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  font-family: 'Inter', ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
  font-size: 18px;
  line-height: 1.65;
  /* Layered gradient background */
  background:
    radial-gradient(900px 420px at 110% -10%, rgba(255,255,255,0.06), transparent 55%),
    radial-gradient(700px 360px at -10% 0%, rgba(255,255,255,0.04), transparent 55%),
    linear-gradient(180deg, #0a0a0a 0%, #0b0b0b 100%);
  min-height: 100vh;
}

/* Typography scale */
h1 { @apply text-4xl md:text-5xl font-extrabold leading-tight tracking-tight; }
h2 { @apply text-3xl md:text-4xl font-bold leading-tight; }
h3 { @apply text-2xl font-semibold leading-snug; }

/* Utility tokens mapped to Tailwind via arbitrary values */
:root {
  --primary: var(--brand);
  --primary-dark: #e5e7eb;
  --accent: var(--brand-2);
  --accent-dark: #9ca3af;
  --gradient-from: #111111;
  --gradient-to: #1f1f1f;
}

/* Light mode overrides */
.theme-light {
  --brand: #111111;
  --brand-2: #1f2937;
  --ring: 220 13% 18%;
  --bg-0: #f8fafc;
  --bg-1: rgba(255,255,255,0.80);
  --bg-2: rgba(0,0,0,0.06);
  --text-0: #0b1220;
  --text-1: #334155;
  --gradient-from: #ffffff;
  --gradient-to: #f3f4f6;

  /* Light-mode borders and buttons */
  --border: rgba(0, 0, 0, 0.12);
  --muted: #64748b;
  --btn-fg: #ffffff;
  --btn-bg: rgba(0, 0, 0, 0.80);
  --btn-bg-hover: rgba(0, 0, 0, 0.86);

  /* Light-mode panels and inputs */
  --panel: rgba(255, 255, 255, 0.92);
  --input-bg: rgba(255, 255, 255, 0.96);
  --input-bg-focus: rgba(255, 255, 255, 1);
}
.theme-light body {
  color: var(--text-0);
  background:
    radial-gradient(900px 420px at 110% -10%, rgba(0,0,0,0.05), transparent 55%),
    radial-gradient(700px 360px at -10% 0%, rgba(0,0,0,0.04), transparent 55%),
    linear-gradient(180deg, #f8fafc 0%, #f3f4f6 100%);
}

/* Buttons (utility for legacy .btn usage) */
.btn {
  @apply inline-flex items-center gap-2 px-4 py-2 rounded-[var(--radius)] font-semibold transition-all duration-200 shadow-sm will-change-transform;
}
.btn-primary {
  color: var(--btn-fg);
  background: linear-gradient(180deg, rgba(255,255,255,0.10) 0%, rgba(255,255,255,0.06) 100%);
  box-shadow: 0 10px 30px -12px rgba(0, 0, 0, 0.45);
}
.btn-primary:hover {
  @apply -translate-y-0.5;
  background: linear-gradient(180deg, rgba(255,255,255,0.14) 0%, rgba(255,255,255,0.08) 100%);
  box-shadow: 0 16px 38px -14px rgba(0, 0, 0, 0.55);
}
.btn-secondary {
  @apply backdrop-blur-sm shadow-md hover:shadow-lg hover:-translate-y-0.5;
  color: var(--text-0);
  border: 1px solid var(--border);
  background: var(--bg-2);
}
.btn-secondary:hover { background: var(--bg-1); }

/* Light theme: ensure primary button has strong contrast */
.theme-light .btn-primary {
  color: #ffffff;
  background: linear-gradient(180deg, rgba(0,0,0,0.90) 0%, rgba(0,0,0,0.80) 100%);
  box-shadow: 0 10px 30px -12px rgba(0, 0, 0, 0.55);
}
.theme-light .btn-primary:hover {
  @apply -translate-y-0.5;
  background: linear-gradient(180deg, rgba(0,0,0,0.96) 0%, rgba(0,0,0,0.86) 100%);
  box-shadow: 0 16px 38px -14px rgba(0, 0, 0, 0.65);
}

/* Cards */
.card {
  @apply rounded-[var(--radius)] p-4 backdrop-blur-md shadow-xl;
  border: 1px solid var(--border);
  background: linear-gradient(180deg, rgba(255,255,255,0.06) 0%, rgba(255,255,255,0.03) 100%);
}

/* Inputs */
.input {
  @apply rounded-[var(--radius)] px-3 py-2 w-full backdrop-blur-sm transition-all duration-200;
  color: var(--text-0);
  border: 1px solid var(--border);
  background: var(--input-bg);
}
.input::placeholder { color: var(--muted); }
.input:focus {
  @apply outline-none ring-2;
  box-shadow: 0 0 0 4px rgba(109, 110, 249, 0.15);
  --tw-ring-color: hsl(var(--ring));
}

/* Glass helpers */
.glass-effect {
  @apply backdrop-blur-md;
  border: 1px solid var(--border);
  background: var(--panel);
}

.gradient-text {
  background: linear-gradient(180deg, var(--primary) 0%, var(--primary-dark) 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

/* Light mode gradient text should be dark for contrast */
.theme-light .gradient-text {
  background: linear-gradient(180deg, var(--text-0) 0%, var(--text-1) 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

/* Scrollbar */
.scrollbar-thin::-webkit-scrollbar { height: 6px; width: 6px; }
.scrollbar-thin::-webkit-scrollbar-thumb {
  background: linear-gradient(135deg, var(--brand) 0%, var(--brand-2) 100%);
  border-radius: 9999px;
}

/* Mini-player title marquee */
.marquee { 
  overflow: hidden; 
  white-space: nowrap; 
}
.marquee-inner { 
  display: inline-block; 
  padding-right: 2rem; 
  animation: marquee 12s linear infinite; 
}
.marquee:hover .marquee-inner { 
  animation-play-state: paused; 
}
@keyframes marquee {
  0% { transform: translateX(0); }
  100% { transform: translateX(-100%); }
}

/* Navbar shadow accent (dark mode only) */
.app-navbar::after {
  content: '';
  position: absolute;
  left: 0;
  right: 0;
  bottom: -1px;
  height: 14px;
  pointer-events: none;
  background: linear-gradient(180deg, rgba(0,0,0,0.45), rgba(0,0,0,0));
}
/* Disable extra accent in light mode */
.theme-light .app-navbar::after {
  background: linear-gradient(180deg, rgba(0,0,0,0), rgba(0,0,0,0));
}

/* Touch-friendly range slider for mobile seek bar */
.range-touch {
  -webkit-appearance: none;
  appearance: none;
  height: 32px; /* increase hit area */
  background: transparent;
}
.range-touch:focus { outline: none; }
.range-touch::-webkit-slider-runnable-track {
  height: 6px;
  background: linear-gradient(90deg, var(--brand) 0%, rgba(255,255,255,0.25) 100%);
  border-radius: 9999px;
}
.range-touch::-moz-range-track {
  height: 6px;
  background: linear-gradient(90deg, var(--brand) 0%, rgba(255,255,255,0.25) 100%);
  border-radius: 9999px;
}
.range-touch::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  margin-top: -9px; /* center on 6px track */
  width: 24px;
  height: 24px;
  border-radius: 9999px;
  background: var(--text-0);
  box-shadow: 0 2px 6px rgba(0,0,0,0.35);
  border: 1px solid var(--border);
}
.range-touch::-moz-range-thumb {
  width: 24px;
  height: 24px;
  border-radius: 9999px;
  background: var(--text-0);
  box-shadow: 0 2px 6px rgba(0,0,0,0.35);
  border: 1px solid var(--border);
}

/* Aspect ratio helpers */
.aspect-square { position: relative; }
.aspect-square::before { content: ''; display: block; padding-bottom: 100%; }
.aspect-inner { position: absolute; inset: 0; }

/* Fallback for two-line clamp if Tailwind plugin isn't available */
.line-clamp-2 {
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}
